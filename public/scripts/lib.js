var $$modules={};"undefined"==typeof module&&"undefined"!=typeof window&&(window.module={}),function(t,e,n){"object"==typeof exports&&void 0!==e?e.exports=n():("undefined"!=typeof window?t=window:"undefined"!=typeof global&&(t=global),t.$Export=n())}(this,module,function(){"use strict";function t(t,i,r){return $$modules[i]={obj:t,path:r},{include:e(t,i),init:n(t,i,[])}}function e(t,e){return function(i){return{init:n(t,e,i)}}}function n(t,e,n){return function(i,r,o){"undefined"!=typeof window?i=window:"undefined"!=typeof global&&(i=global);var s=function(t,e){var r,s=[],a=a||t||{},h=h||e||a.document||{};if(n.length<1)return o.apply(i,s);for(var u=0;u<n.length;u++)switch(n[u]){case"window":s[u]=a;break;case"document":s[u]=h;break;default:if(void 0===(r=$$modules[n[u]]))throw new Error("`"+n[u]+"` module doesn't exists!");s[u]=i[r.obj]||require(r.path)(a,h)}return o.apply(i,s)};"object"==typeof exports&&void 0!==r?r.exports=s:typeof window!=={}?"@"==e[0]?i[t]=s(window,document):s(window,document):i[t]=s}}return{module:t}});var $Export=$Export||require("../export");$Export.module("Element","Element","./window/element").include(["window"]).init(this,module,function(t){return t.Element||{}});var $Export=$Export||require("../export");$Export.module("CSSStyleSheet","CSSStyleSheet","./window/style").include(["window"]).init(this,module,function(t){return t.CSSStyleSheet||{}});var $Export=$Export||require("../export");$Export.module("HTMLAllCollection","HTMLAllCollection","./window/html").include(["window"]).init(this,module,function(t){return t.HTMLAllCollection||{}});var $Export=$Export||require("./export");$Export.module("Ruddy","@core","./core").include(["window","document","HTMLAllCollection"]).init(this,module,function(t,e,n){var i={},r={},o=$Export.module,s={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img",input:"input"},a=Object.prototype.assign||function(t){"use strict";if(null===t)throw new TypeError("Cannot convert null or undefined to an object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},h=function(t){return"object"==typeof t||"function"==typeof t},u=function(t){return"function"==typeof t},l=Array.isArray||function(t){return t&&t.constructor===Array||""+t!==t&&"[object Array]"=={}.toString.call(t)},c=function(t){return"string"==typeof t},p=function(t){return"number"==typeof t},d=Number.isInteger||function(t){return p(t)&&isFinite(t)&&Math.round(t)===t},f=function(t){return p(t)&&Math.round(t)!==t},m=function(t){return"[object Date]"===Object.prototype.toString.call(t)},g=function(t){return"boolean"==typeof t},y=function(e){var i=Object.prototype.toString.call(e);return"object"==typeof e&&(/^\[object (HTMLCollection|NodeList|Object)\]$/.test(i)&&"number"==typeof e.length||e[0]&&x(e[0]))||t.HTMLAllCollection&&e instanceof n},x=function(t){return!(!t||!(t.nodeName||t.tagName||t.className||t.id)||t==e)};return{cache:i,events:r,assign:a,export:o,isObj:h,isFunc:u,isArr:l,isEl:x,isStr:c,isNum:p,isInt:d,isFloat:f,isDate:m,isBool:g,isNodes:y,isDoc:function(t){return t==e},isEvent:function(t){if(typeof e==={})return!1;var n,i=e.createElement(s[t]||"div");return t="on"+t,(n=t in i)||(i.setAttribute(t,"return;"),n="function"==typeof i[t]),i=null,n}}});var $Export=$Export||require("../core/export");$Export.module("$arr","@array","../globals/array").include(["@core"]).init(this,module,function(t){"use strict";return function(e){if(t.isArr(e)===!1)throw new TypeError("Array type - argument provided is not an array type");var n={isEmpty:function(){return 0==e.length},join:Array.prototype.join||function(t){var n=e,i=n.length,r=0,o="",t=t||",";for(r;r!==i-1;r++)o+=n[r]+t;return o+=n[i-1]},push:Array.prototype.push||function(){var t=arguments,n=t.length,i=0;for(i;i!==n;i++)e[e.length]=t[i];return e.length},pop:Array.prototype.pop||function(){var t;if(!(e.length<=0))return t=e[e.length-1],e.length=e.length-1,t},reverse:Array.prototype.reverse||function(){var t=e.length-1,n=0,i=[];for(t;t>=0;t--)i[n]=e[t],n++;return i},concat:Array.prototype.concat||function(){var t=arguments,n=t.length,i=0,r=$arr(e).join();for(i;i!==n;i++)r+=","+t[i];return r.split(",")},forEach:Array.prototype.forEach||function(t,n){if("function"!=typeof t)throw new TypeError(t+" is not a function");var i=e.join().split(","),n=n||e,r=i.length,o=0;for(o;o!==r;o++)t.call(n,i[o],o,i)},map:Array.prototype.map||function(t,n){var i,r=e,o=[],s=0,a=r.length;for(s;s!=a;s++)i=r[s],o[s]=n?t.call(n,i,s,r):t(i,s,r);return o},reduce:Array.prototype.reduce||function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,i=e,r=i.length>>>0,o=0;if(2==arguments.length)n=arguments[1];else{for(;o<r&&!o in i;)o++;if(o>=r)throw new TypeError("Reduce of empty array with no initial value");n=i[o++]}for(;o<r;o++)o in i&&(n=t(n,i[o],o,i));return n},indexOf:Array.prototype.indexOf||function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=e);n<e;n++)if(n in this&&this[n]===t)return n;return-1},first:function(){if(!(e.length<=0))return e[0]},last:function(){if(!(e.length<=0))return e[e.length-1]}};return t.assign(e,n)}});var $Export=$Export||require("../core/export");$Export.module("$str","@string","../globals/string").include(["@core"]).init(this,module,function(t){"use strict";return function(e){if(t.isStr(e)===!1)throw new TypeError("String type - argument provided is not a string type");var n={isEmpty:function(){var t=e;return null==t||""==t||0==t.length},toLowerCase:String.prototype.toLowerCase||function(){return e.replace(/[a-z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)&-33)})},toUpperCase:String.prototype.toUpperCase||function(){return e.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))})},ucfirst:function(){return e.charAt(0).toUpperCase()+this.substr(1)},pregMatch:function(t){return new RegExp(t).test(e)},escapeHTML:function(){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},toHTML:function(){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n?n.nodeValue:""}};return t.assign(e,n)}});var $Export=$Export||require("../core/export");$Export.module("$num","@number","../globals/number").include(["@core"]).init(this,module,function(t){"use strict";return function(e){if(t.isNumber(e)===!1)throw new TypeError("Number type - argument provided is not an number type");var n={isInteger:function(){return t.isInt(e)},isFloat:function(){return t.isFloat(e)}};return t.assign(e,n)}});var $Export=$Export||require("../core/export");$Export.module("$int","@integer","../globals/integer").include(["@core"]).init(this,module,function(t){"use strict";return function(e){if(t.isInt(e)===!1)throw new TypeError("Integer type - argument provided is not an integer type");var n={};return t.assign(e,n)}});var $Export=$Export||require("../core/export");$Export.module("$float","@float","../globals/float").include(["@core"]).init(this,module,function(t){return function(e){if(t.isFloat(e)===!1)throw new TypeError("Float type - argument provided is not an float type");var n={};return t.assign(e,n)}});var $Export=$Export||require("../core/export");$Export.module("$obj","@object","../globals/object").include(["@core"]).init(this,module,function(t){"use strict";return function(e){if(t.isObj(e)===!1)throw new TypeError("Object type - argument provided is not an object type");var n={keys:function(){var t,i=[],r=0;for(t in e)n[t]||(i[r]=t,r++);return i},values:function(){var t,i=[],r=0;for(t in e)n[t]||(i[r]=e[t],r++);return i},push:function(){var t,n,i=arguments;for(n in i)t=i[n],e[t.key]=t.value;return $obj(e).keys().length},map:function(t,n){var i,r,o=e,s=[];for(i in o)r=o[i],s[i]=n?t.call(n,r,i,o):t(r,i,o);return s},forEach:function(t,i){if("function"!=typeof t)throw new TypeError(t+" is not a function");var r,i=i||e;for(r in e)n[r]||t.call(i,e[r],r,e)},assign:function(t,n){return e.prototype[t]=n},extend:function(t){t=t.prototype;for(var n in t)e.prototype[n]||(e.prototype[n]=t[n]);return e}};return t.assign(e,n)}});var $Export=$Export||require("../core/export");$Export.module("$func","@function","../globals/function").include(["@core"]).init(this,module,function(t){"use strict";return function(e){if(t.isFunc(e)===!1)throw new TypeError("Function type - argument provided is not a function type");var n={assign:function(t,e){return e.prototype[t]=e},bind:Function.prototype.bind||function(t){function n(){}var i=[].slice,r=i.call(arguments,1),o=e,s=function(){return o.apply(e instanceof n?e:t||window,r.concat(i.call(arguments)))};return n.prototype=e.prototype,s.prototype=new n,s}};return t.assign(e,n)}});var $Export=$Export||require("../core/export");$Export.module("$nodes","@nodes","../globals/nodes").include(["@core"]).init(this,module,function(t){return function(e){if(t.isNodes(e)===!1)throw new TypeError("Nodes type - argument provided is not a nodeList type");var n={push:function(){"use strict";var t=arguments,n=t.length,i=0;for(i;i!==n;i++)e[e.length]=t[i];return e.length},concat:function(){"use strict";var t=arguments,n=t.length,i=0,r=$nodes(e).join();for(i;i!==n;i++)r+=","+t[i];return r.split(",")},forEach:Array.prototype.forEach||function(t,n){"use strict";if("function"!=typeof t)throw new TypeError(t+" is not a function");var i=e,n=n||e,r=i.length,o=0;for(o;o!==r;o++)t.call(n,i[o],o,i)},map:function(t,n){"use strict";var i,r=e,o=[],s=0,a=r.length;for(s;s!=a;s++)i=r[s],o[s]=n?t.call(n,i,s,r):t(i,s,r);return o},first:function(){"use strict";if(0==e.length)throw new TypeError("Cant retrieve first element of an nodeList array with no initial value");return e[0]},last:function(){"use strict";if(0==e.length)throw new TypeError("Cant retrieve last element of an empty nodeList with no initial value");return e[e.length-1]},isOne:function(){"use strict";if(0==e.length)throw new TypeError("Cant retrieve last element of an empty nodeList with no initial value");return 1==e.length},indexOf:function(t){"use strict";var n,i=e;for(n in i)if(t==i[n])return n;return-1}};return t.assign(e,n)}});var $Export=$Export||require("../core/export");$Export.module("$css","@style","../globals/style").include(["@core","window","document","Element","CSSStyleSheet"]).init(this,module,function(t,e,n,i,r){"use strict";return function(n){var i={getRule:function(t){return n.cssRules[t]},getCSSText:function(t){return n.cssRules[t].cssText},insertRule:"CSSStyleSheet"in e?r.prototype.insertRule:function(t,e){var i;return t=t.replace(/\s+/g,""),i=t.split("{"),n.addRule(i[0],i[1].replace("}",""),e),e},deleteRule:"CSSStyleSheet"in e?r.prototype.deleteRule:function(t){return n.removeRule(t)},ruleToJson:function(t){return t=t.replace(/\s+/g,""),t=t.split("{"),'{"selector":"'+t[0]+'","'+t[1].replace(":",'":"').replace(";}",'"}').replace(";",'","')},jsonToRule:function(t){var e=JSON.parse(t).selector;return e+t.replace(/"/g,"").replace(/,/g,";").replace("selector:"+e+";","")},ruleToObj:function(t){t=t.replace(/\s+/g,""),t=t.split("{");var e={},n=null,i=0,r=t[0],o=t[1].replace("}").split(";");for(e[r]={},i;i!=o.length;i++)""!=o[i]&&(n=o[i].split(":"),e[r][n[0]]=n[1]);return e},objToRule:function(t){var e,n,i="";for(e in t){i+=e+"{";for(n in t[e])i+=n+":"+t[e][n]}return i+"}"}};return t.assign(n,i)}});var $Export=$Export||require("../core/export");$Export.module("$doc","@document","../globals/document").include(["@core","window","document","Element"]).init(this,module,function(t,e,n,i){"use strict";return function(r){if(t.isDoc(r)===!1)throw new TypeError("Document type - argument provided is not a document variable");var o={querySelectorAll:n.querySelectorAll||function(t,e,i,r,o){var s=n,a=s.createStyleSheet();for(o=s.all,e=[],t=t.replace(/\[for\b/gi,"[htmlFor").split(","),i=t.length;i--;){for(a.addRule(t[i],"visiblility:visible",0),r=o.length;r--;)o[r].currentStyle.visiblility&&e.push(o[r]);a.removeRule(0)}return e},querySelector:n.querySelector||function(t){var e=o.querySelectorAll.call(n,t);return e.length?e[0]:null},createStyle:function(t){var e,i=n.createElement("style");return i.title=t,e=n.getElementsByTagName("head")[0].appendChild(i),e.sheet},getStyle:function(t){var e,i=n.styleSheets,r=i.length;for(e=r;e--;)if(i[e].title==t)return i[e];return!1},addEventListener:n.addEventListener||function(t,e){return r.attachEvent("on"+t,e)},dispatchEvent:"Element"in e?i.prototype.dispatchEvent:function(t){return r.fireEvent("on"+t.type,t)},customEvent:function(t,i){function r(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=n.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}return"function"==typeof e.CustomEvent?new r(t,i):(e.CustomEvent=r,new r(t,i))},mousePosition:function(t,e){var i=t.pageX||t.clientX+n.body.scrollLeft+n.documentElement.scrollLeft||(t.changedTouches?t.changedTouches[0].pageX:0),r=t.pageY||t.clientY+n.body.scrollTop+n.documentElement.scrollTop||(t.changedTouches?t.changedTouches[0].pageY:0),o={x:Math.round(i),y:Math.round(r)};return e&&o[e]?o[e]:o},size:function(t){var e=Math.max(n.documentElement.clientWidth,n.body.scrollWidth,n.documentElement.scrollWidth,n.body.offsetWidth,n.documentElement.offsetWidth)||0,i=Math.max(n.documentElement.clientHeight,n.body.scrollHeight,n.documentElement.scrollHeight,n.body.offsetHeight,n.documentElement.offsetHeight)||0,r={width:e,height:i};return t&&r[t]?r[t]:r},viewport:function(t){var i=e.innerWidth||(n.documentElement?n.documentElement.clientWidth:n.body.clientWidth)||0,r=e.innerHeight||(n.documentElement?n.documentElement.clientHeight:n.body.clientHeight)||0,o={width:i,height:r};return t&&o[t]?o[t]:o},getComputedStyle:function(){function t(e,n,i,r){var o,s=n[i],a=parseFloat(s),h=s.split(/\d/)[0];return r=null!=r?r:/%|em/.test(h)&&e.parentElement?t(e.parentElement,e.parentElement.currentStyle,"fontSize",null):16,o="fontSize"==i?r:/width/i.test(i)?e.clientWidth:e.clientHeight,"em"==h?a*r:"in"==h?96*a:"pt"==h?96*a/72:"%"==h?a/100*o:a}function n(t,e){var n="border"==e?"Width":"",i=e+"Top"+n,r=e+"Right"+n,o=e+"Bottom"+n,s=e+"Left"+n;t[e]=(t[i]==t[r]==t[o]==t[s]?[t[i]]:t[i]==t[o]&&t[s]==t[r]?[t[i],t[r]]:t[s]==t[r]?[t[i],t[r],t[o]]:[t[i],t[r],t[o],t[s]]).join(" ")}function i(e){var i=e.currentStyle,r=this,o=t(e,i,"fontSize",null);for(var s in i)/width|height|margin.|padding.|border.+W/.test(s)&&"auto"!==r[s]?r[s]=t(e,i,s,o)+"px":"styleFloat"===s?r.float=i[s]:r[s]=i[s];return n(r,"margin"),n(r,"padding"),n(r,"border"),r.fontSize=o+"px",r}function r(t){return new i(t)}return"getComputedStyle"in e?e.getComputedStyle.apply(e,arguments):(i.prototype={constructor:i,getPropertyPriority:function(){},getPropertyValue:function(t){return this[t]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},r)}};return t.assign(r,o)}});var $Export=$Export||require("../core/export");$Export.module("$el","@element","../globals/element").include(["window","document","Element","@core","@document","@nodes"]).init(this,module,function(t,e,n,i,r,o){"use strict";return function(s){if(i.isEl(s)===!1)throw new TypeError("Element type - argument provided is not an element type");var a={querySelectorAll:"Element"in t?n.prototype.querySelectorAll:function(t){var n,i=s.childNodes,a=[],h=0;for(n=0;n<i.length;n++)o(r(e).querySelectorAll(t)).indexOf(i[n])!==-1&&(a[h]=i[n],h++);return a},querySelector:"Element"in t?n.prototype.querySelector:function(t){var e=$el(s).querySelectorAll(t);return e.length?e[0]:null},addEventListener:"Element"in t?n.prototype.addEventListener:function(t,e){return s.attachEvent("on"+t,e)},dispatchEvent:"Element"in t?n.prototype.dispatchEvent:function(t){return s.fireEvent("on"+t.type,t)},getAttribute:"Element"in t?n.prototype.getAttribute:function(t){var e,n=s.attributes;for(e=n.length;e--;)if(n[e].name==t)return n[e].value;return null},setAttribute:"Element"in t?n.prototype.setAttribute:function(t,e){var n,i=s.attributes;for(n=i.length;n--;)if(i[n].name==t)return void(i[n].value=e);i[i.length]={},i[i.length][t]={}}};return i.assign(s,a)}});var $Export=$Export||require("../core/export");$Export.module("$r","@ruddy","../globals/ruddy").include(["window","document","@core","@object","@function","@element","@document","@nodes","@style"]).init(this,module,function(t,e,n,i,r,o,s,a,h){"use strict";var u=n.cache.$r={},l=s(e),c=a(void 0===l.all?l.getElementsByTagName("*"):l.all),p=(h(l.createStyle("ruddyjs")),i(function(t){if(!(this instanceof p))return new p(t);var e,i=t;if(n.isEl(i)&&(i=c.indexOf(t)),u[i]){var r=u[i];this.el=r.el,this.param=r.param,this.index=r.index}else n.isEl(t)?(e=o(t),t=i):n.isStr(t)?(e=a(l.querySelectorAll(t)),i=1==e.length?c.indexOf(e.first()):t,e=1==e.length?e[0]:e):n.isInt(t)?(e=c[t]?c[t]:null,i=t):(e=t,i=JSON.stringify(t)||t),this.el=e,this.param=t,this.index=i,u[i]={el:this.el,param:this.param,index:this.index}}));return p.assign("find",r(function(t){var e=this.param+":"+t,n=this.el;return u[e]?p(e):(n=a(o(n).querySelectorAll(t)),n=1==n.length?o(n.first()):n,u[e]={el:n,param:e,index:a(l.all).indexOf(n),rule:null},p(e))})),p.assign("each",r(function(t){var e=this.el;return n.isArr(e)||n.isNodes(e)?(e.forEach.call(e,t,this),this):(t.call(this,e,0,e),this)})),p.assign("html",r(function(t){var e=this.el;return void 0===t?e.innerHTML:{inner:function(){return n.isFunc(t)?e.innerHTML=t.call(e):e.innerHTML=t},append:function(){return n.isFunc(t)?e.innerHTML+=t.call(e):e.innerHTML+=t}}})),p.assign("attribute",r(function(t,e){if(n.isEl(this.el)===!1)throw new TypeError("$r argument provided is not an element");return e?this.el.setAttribute(t,e):this.el.getAttribute(t)})),p.assign("value",r(function(t){if(n.isEl(this.el)===!1)throw new TypeError("$r argument provided is not an element");return t?this.el.value=t:this.el.value})),p.assign("createRule",r(function(t){var e=t.insertRule(this.param+"{}",t.cssRules.length);return u[this.param].rule=this.rule=t.getRule(e),e})),p.assign("css",r(function(t,e){var n=this.rule;return t+="",e?n.style[t]=e:n.style[t]})),p.assign("style",r(function(t,e){var n=this.el;return e?n.style[t]=e:$str(n.style[t]).isEmpty()?l.getComputedStyle(n).getPropertyValue(t):n.style[t]})),p.assign("if",r(function(t,e){return this.total=1,this.count=0,t&&this.count++,this.count==this.total&&e&&e.call(this,this.el),this})),p.assign("elseif",r(function(t,e){return 1!=this.count&&t&&(this.count++,this.total=0),this.total++,this.count==this.total&&e&&e.call(this,this.el),this})),p.assign("else",r(function(t){return 1!=this.count&&(this.count++,this.total=1,t.call(this,this.el)),this.total++,this})),p.assign("when",r(function(t,e){return this.total=1,this.count=0,t="function"==typeof t?t.call(this):t,t&&this.count++,this})),p.assign("do",r(function(t){return this.count==this.total&&t.call(this,this.el),this})),p.assign("or",r(function(t,e){return t="function"==typeof t?t.call(this):t,1!=this.count&&t&&(this.count++,this.total=0),this.total++,this})),p.assign("on",r(function(e,i,r){var o,s=this.el,a=0;if(e in n.events)return void(s.calls=n.events[e].call(this,s,i,r));s.addEventListener(e,function(e){e=e||t.event,o=e.target||e.srcElement,a++,i.call(this,e,o,s,a)},!1)})),p.assign("position",r(function(n){var i,r,o,s,a,h,u,l="getBoundingClientRect"in this.el?this.el.getBoundingClientRect():{top:0,left:0},c=e.body,p=e.documentElement;return r=t.pageYOffset||p.scrollTop||c.scrollTop,o=t.pageXOffset||p.scrollLeft||c.scrollLeft,s=p.clientTop||c.clientTop||0,a=p.clientLeft||c.clientLeft||0,h=l.left+o-a,u=l.top+r-s,i={x:Math.round(h)||0,y:Math.round(u)||0},n&&n in i?i[n]:i})),p.assign("size",r(function(t){var e=parseInt(this.style("width"))||this.el.offsetWidth||0,n=parseInt(this.style("height"))||this.el.offsetHeight||0,i={width:e,height:n};return t&&i[t]?i[t]:i})),p.assign("getTranslate",r(function(){var t,e=this.style("transform");if(e&&(t=e.match(/translate\((.*)px, (.*)px\)/)?e.match(/(translate)\((.*)px, (.*)px\)/):e.match(/translate(X|Y)\((.*)px\)/)),null!=t)switch(t[1]){case"X":return{x:parseInt(t[2])||0,y:0};case"Y":return{x:0,y:parseInt(t[2])||0};default:return{x:parseInt(t[2])||0,y:parseInt(t[3])||0}}return{x:parseInt(this.style("left"))||0,y:parseInt(this.style("top"))||0}})),p.assign("setTranslate",r(function(t,n){return"transform"in e.body.style?(this.style("transform","translate("+t+"px, "+n+"px)"),this):(this.style("top",n+"px"),this.style("left",t+"px"),this)})),p.assign("setTranslateX",r(function(t){return"transform"in e.body.style?(this.style("transform","translateX("+t+"px)"),this):(this.style("left",t+"px"),this)})),p.assign("setTranslateY",r(function(t){return"transform"in e.body.style?(this.style("transform","translateY("+t+"px)"),this):(this.style("left",t+"px"),this)})),p});var $Export=$Export||require("ruddy").export;$Export.module("Animation","+animation","ruddy-animation").include(["window","@function","@ruddy"]).init(this,module,function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=t||{}}for(var r=0,o=["ms","moz","webkit","o"],s=0;s<o.length&&!t.requestAnimationFrame;++s)t.requestAnimationFrame=t[o[s]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o[s]+"CancelAnimationFrame"]||t[o[s]+"CancelRequestAnimationFrame"];return t.setTimeout||(t.setTimeout=setTimeout),t.clearTimeout||(t.clearTimeout=clearTimeout),t.requestAnimationFrame||(t.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-r)),s=t.setTimeout(function(){e(i+o)},o);return r=i+o,s}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),i.prototype={delta:{linear:function(t){return t},quadrantic:function(t,e){return Math.pow(t,e)},circ:function(t){return 1-Math.sin(Math.acos(t))},backbow:function(t,e){return Math.pow(t,2)*((e+1)*t-e)},bounce:function(t){for(var e=0,n=1;1;e+=n,n/=2)if(t>=(7-4*e)/11)return-Math.pow((11-6*e-11*t)/4,2)+Math.pow(n,2)},elastic:function(t,e){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)},custom:function(t){return Math.pow(t,Math.LOG10E)}},requestAnimation:function(e){return t.requestAnimationFrame(e)},cancleAnimation:function(e){this.animation=function(){t.cancelAnimationFrame(e||this.animation)},this.animation()},getValue:function(t,e,n){return t+(e-t)*n},setAni:function(n,i,r,o){var s,a,h,u,l=Date.now(),c=Date.now();this.animation=e(function(){if(s=Date.now(),!o||n.startPoint==n.endPoint)return void(r&&r.apply(this.options,n));if(s-c>=1e3*n.delay){if(a=Date.now()-l,h=a/n.duration,h>1&&(h=1),u=n.delta(h),n.step(u),i&&i.apply(this.options,n),1==h)return r&&r.apply(this.options,n),void this.cancleAnimation(this.animation);c=Date.now()}t.requestAnimationFrame(this.animation.bind(this))}),this.animation()},animate:function(t){var t=t||{},n=t.ext||"",i=t.delay||0,r=t.startPoint||0,o=t.endPoint||0,s=t.callback||!1,a=t.action||!1,h=t.condition||!0,u=t.step||function(){},l=1e3*t.duration||1e3,c=t.delta||this.setDelta("easeOut",{name:"linear",progress:1});this.setAni({delay:i,duration:l,delta:c,ext:n,startPoint:r,endPoint:o,step:e(function(t){u(this.getValue,r,o,t,n)}).bind(this)},a,s,h)},getDelta:function(t,e){var n=this.delta;return t in n?function(i){return n[t](i,e)}:function(t){return t}},setEase:function(t,e,n){switch(t){case"easeOut":return function(t){return 1-e(1-t)};case"easeInOut":return function(t){return t<.5?e(2*t)/2:(2-e(2*(1-t)))/2};case"easeInOut_delta":return function(t){return t<.5?e(2*t)/2:(2-n(2*(1-t)))/2};default:return e}},setDelta:function(t,e,n){return e=!!e&&this.getDelta(e.name,e.progress),n=!!n&&this.getDelta(n.name,n.progress),this.setEase(t,e,n)}},void 0===n?i:(n.assign("animate",function(t){var n,r=t.style||"";return"animation"in this||(this.animation=i(this)),t.step=e(function(t,e,i,o,s){switch(r){case"x":this.setTranslateX(t(e,i,o));break;case"y":this.setTranslateY(t(e,i,o));break;case"xy":this.setTranslate(t(e.x,i.x,o),t(e.y,i.y,o));break;default:if("function"==typeof r)return void r.call(this,t,e,i,o);n=t(e,i,o),this.style(r,n+s)}}).bind(this),this.animation.animate(t)}),n.assign("setDelta",function(t,e,n){return"animation"in this||(this.animation=i(this)),this.animation.setDelta(t,e,n)}),i)});var $Export=$Export||require("ruddy").export;$Export.module("Scroll","+scroll","ruddy-scroll").include(["window","@core","@function","@ruddy"]).init(this,module,function(t,e,n,i){function r(){return t.pageXOffset||(document.documentElement.clientWidth?document.documentElement.scrollLeft:document.body.scrollLeft)}function o(){return t.pageYOffset||(document.documentElement.clientHeight?document.documentElement.scrollTop:document.body.scrollTop)}return i.assign("scroll",n(function(e,n,i){var s=r(),a=o(),i=i||{},h=i.duration||1,u=i.delay||0,l=i.action||!1,c=i.callback||!1,p=i.condition||!0,d=i.delta||void 0;this.animate({delay:u,duration:h,delta:d,startPoint:{x:s,y:a},endPoint:{x:e,y:n},style:function(i,r,o,h){s==e&&a==n||t.scrollTo(i(r.x,o.x,h),i(r.y,o.y,h))},action:l,callback:c,condition:p})})),i.assign("scrollX",n(function(e,n){var i=r(),n=n||{},s=n.duration||1,a=n.delay||0,h=n.action||!1,u=n.callback||!1,l=n.condition||!0,c=n.delta||void 0;this.animate({delay:a,duration:s,delta:c,startPoint:i,endPoint:e,style:function(n,r,s,a){i!=e&&t.scrollTo(n(r,s,a),o())},action:h,callback:u,condition:l})})),i.assign("scrollY",n(function(e,n){var i=o(),n=n||{},s=n.duration||1,a=n.delay||0,h=n.action||!1,u=n.callback||!1,l=n.condition||!0,c=n.delta||void 0;this.animate({delay:a,duration:s,delta:c,startPoint:i,endPoint:e,style:function(e,n,o,s){i!=o&&t.scrollTo(r(),e(n,o,s))},action:h,callback:u,condition:l})})),{xy:i.scroll,x:i.scrollX,y:i.scrollY}});var $Export=$Export||require("ruddy").export;$Export.module("Ajax","+ajax","ruddy-ajax").include(["window","@core","@function","@ruddy"]).init(this,module,function(t,e,n,i){if(!t.XMLHttpRequest){var r=["MSXML2.XMLHTTP.6.0","MSXML3.XMLHTTP","Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0"],o=null;t.XMLHttpRequest=function(){if(null===o){var e;if(t.Activerequestect)for(var n=0,i=r.length;n<i;n++){try{e=new t.Activerequestect(r[n])}catch(t){e=!1}if(e)return o=r[n],e}o=!1}if(o===!1)throw new Error("XMLHttpRequest not supported in this browser");return new t.Activerequestect(o)}}return i.assign("ajax",n(function(t){var e=new XMLHttpRequest,n=this.param.url||!1,t=t||{},i=t.method||"GET",r=t.async||!0,o=t.contentType||"application/x-www-form-urlencoded",s=t.mimeType||!1,a=t.success||function(){},h=t.error||function(){},u=t.data||null,l=null;if("GET"==i&&u){var c;l="?";for(c in t.data)l+=c+"="+t.data[c]+"&";l.slice(0,-1),n+=l}return e.open(i,encodeURI(n),r),s&&e.overrideMimeType(s),e.setRequestHeader("Content-Type",o),e.onreadystatechange=function(){var t=e.response||e.responseText||null;4===e.readyState&&200===e.status?a(e,t):h(e,t)},e.send(u),e})),i.assign("jsonp",function(e){var n,i,r=this.param.url||!1,e=e||{},o=e.callback||"callback",s=e.async||!0,a=e.success||function(){},h=e.timeout||function(){},u=e.timelimit||10,l=t.setTimeout(function(){t[o]=function(){},h()},1e3*u);t[o]=function(e){t.clearTimeout(l),a(e,i)},n=document.createElement("script"),n.type="text/javascript",n.async=s,n.src=r,i=document.getElementsByTagName("head")[0].appendChild(n)}),e.post=function(t,n,r,o){e.isFunc(n)&&(r=n,o=r,n=!1);var s=i({url:t}).ajax({method:"POST",success:r||!1,data:n||!1,dataType:o||!1}),a=s.response||s.responseText||null;return{then:function(t){return s.onreadystatechange=function(){4===s.readyState&&s.status,t(s,a)},{catch:function(t){s.onreadystatechange=function(){4===s.readyState&&200===s.status||t(s,a)}}}}}},e.get=function(t,n,r,o){e.isFunc(n)&&(r=n,o=r,n=!1);var s=i({url:t}).ajax({method:"GET",success:r||!1,data:n||!1,dataType:o||!1}),a=s.response||s.responseText||null;return{then:function(t){return 4===s.readyState&&200===s.status&&t(s,a),{catch:function(t){4===s.readyState&&200===s.status||t(s,a)}}}}},{get:e.get,post:e.post}}),function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i=i||{};!function(e){var n=t("./helpers"),i=n.ajax,r=n.contentLoaded,o=n.str_combo,s=n.rgb2hex,a=n.inArray,h=n.forEach,u=["-moz-","-webkit-","-o-","-ms-"],l={moz_webkit:["background-origin","background-size","border-image","border-image-outset","border-image-repeat","border-image-source","border-image-width","border-radius","box-shadow","column-count","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-width"],moz_webkit_ms:["box-flex","box-orient","box-align","box-ordinal-group","box-flex-group","box-pack","box-direction","box-lines","box-sizing","animation-duration","animation-name","animation-delay","animation-direction","animation-iteration-count","animation-play-state","animation-timing-function","animation-fill-mode"],moz_webkit_ms_o:["perspective","transform","transform-origin","transition","transition-property","transition-duration","transition-timing-function","transition-delay","user-select"],misc:["background-clip","border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius"]},c=u[0],p=u[1],d=u[2],f=u[3],m=l.moz_webkit,g=l.moz_webkit_ms,y=l.moz_webkit_ms_o,x=l.misc,v=x.concat(y,m,g),b=["display","opacity","text-overflow","background-image","background"].concat(v),w="filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='{1}', endColorstr='{2}',GradientType=0)";e.processCSS=function(t,n){for(var i=[],r=/([\s\S]*?)\{([\s\S]*?)\}/gim,s=/\@import\s+(?:url\([\'\"]?(.*)[\'\"]?\))\s*\;?/gim,a=/@keyframes\s*([^\{]*)\{([^@]*)\}/g,l=0;l<t.length;l++){var c=o(t[l],1),p=[],d=s.test(c)&&c.match(s),f=a.test(c)&&c.match(a);s.lastIndex=0,a.lastIndex=0;for(var m=0;m<d.length;m++){c=c.replace(d[m],"");var g=s.exec(d[m])[1],y="/"==g[0]?g:n.replace(/[^\/]*?$/,"")+g;e.fetchCSS(y,function(t){e.insertCSS(e.processCSS([t],n))}),s.lastIndex=0}for(var m=0,x=f.length;x>m;m++){c=c.replace(f[m],"");var v=a.exec(f[m]);if(v){for(var w=v[2].match(r),E=[],S=0;S<w.length;S++){var M=r.exec(w[S]);M&&E.push(o(M[1])+"{"+e.processDec(M[2],!0)+"}"),r.lastIndex=0}h([0,1,3],function(t){p.push("@"+u[t]+"keyframes "+o(v[1])+"{"+E.join("\n")+"}")})}a.lastIndex=0}var T=r.test(c)&&c.match(r);r.lastIndex=0;for(var R=0,A=T.length;A>R;R++){var L=r.exec(T[R]);if(null!==L)for(var C=o(L[1],1),$=o(L[2],1),X=0,I=b.length;I>X;X++)if($.indexOf(b[X])>=0){var O=e.processDec($);O&&p.push(C+"{"+O+"}");break}r.lastIndex=0}p.length&&i.push(p.join("\n"))}return i},e.insertCSS=function(t){for(var e=0;e<t.length;e++){var n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t[e]:n.textContent=t[e],document.getElementsByTagName("head")[0].appendChild(n)}},e.processDec=function(t,e){for(var n=t.split(";"),i=[],r="background",l=0;l<n.length;l++)if(!(n[l].indexOf(":")<0)){var b=n[l].split(":");if(2==b.length){var E=o(b[0]),S=o(b[1]),M=[E,S].join(":"),T=[];if(a(E,m))T.push(c+M,p+M);else if(a(E,g))T.push(c+M,p+M,"box-align"==E?f+E+":middle":f+M);else if(a(E,y))h([0,1,2,3],function(t){var e=u[t];if("transition"==E){var n=S.split(" ")[0];T.push(a(n,v)?e+M.replace(n,e+n):e+M)}else if("transition-property"==E){if(e==c){var i=S.split(","),r=[];h(i,function(t){var n=o(t);a(n,v)&&r.push(e+n)}),T.push(e+E+":"+r.join(","))}}else T.push(e+M)});else if(a(E,x))if(E==r+"-clip")"padding-box"===S&&T.push(p+M,c+E+":padding");else{var R=E.split("-");T.push(c+"border-radius-"+R[1]+R[2]+":"+S,p+M)}else switch(E){case"display":"box"==S?h([0,1,3],function(t){T.push("display:"+u[t]+S)
}):"inline-block"==S&&T.push("display:"+c+"inline-stack",M,"zoom:1;*display:inline");break;case"text-overflow":"ellipsis"==S&&T.push(d+M);break;case"opacity":var A=Math.round(100*S);T.push(f+"filter:progid:DXImageTransform.Microsoft.Alpha(Opacity="+A+")","filter: alpha(opacity="+A+")",c+M,p+M);break;case r+"-image":case r+"-color":case r:var L="linear-gradient";if(S.indexOf(L)>=0){var C=new RegExp(L+"\\s?\\((.*)\\)","ig").exec(S);if(null!=C[1]){C=C[1];var $=L+"("+C+")";h([0,1,2,3],function(t){T.push(E+":"+u[t]+$)});var X=C.match(/\#([a-z0-9]{3,})/g);X&&X.length>1&&null!=X[X.length-1]&&T.push(w.replace("{1}",X[0]).replace("{2}",X[X.length-1]))}}else if(S.indexOf("rgba")>=0){var I=S.match(/rgba\((.*?)\)/)[1].split(","),O=Math.floor(255*+o(I[3])).toString(16)+s(+o(I[0]),+o(I[1]),+o(I[2]));T.push("*background:transparent;"+w.replace("{1}","#"+O).replace("{2}","#"+O)+";zoom:1")}break;default:e&&T.push(M)}T.length&&i.push(T.join(";"))}}return i.length&&i.join(";")},e.fetchCSS=function(t,n){i(t,null==n?function(n){e.insertCSS(e.processCSS([n],t))}:n)},r(function(){var t=document.getElementsByTagName("style"),n=document.getElementsByTagName("link");for(var i in n)"object"==typeof n[i]&&"cssfx"===n[i].className&&e.fetchCSS(n[i].href);var r=[];for(var i in t)"object"==typeof t[i]&&r.push(t[i].innerHTML);r.length&&e.insertCSS(e.processCSS(r))})}(i)},{"./helpers":2}],2:[function(t,e,n){e.exports={rgb2hex:function(t,e,n){return((256+t<<8|e)<<8|n).toString(16).slice(1)},inArray:function(t,e){for(var n=0,i=e.length;i>n;n++)if(e[n]==t)return!0;return!1},forEach:function(t,e){for(var n=t.length,i=0;n>i;i++)e.call(this,t[i])},str_combo:function(t,e){return t.replace(null!=e?/\/\*([\s\S]*?)\*\//gim:"","").replace(/\n/gm,"").replace(/^\s*|\s*$/g,"").replace(/\s{2,}|\t/gm," ")},contentLoaded:function(t){var e=window,n="addEventListener",i="complete",r="readystatechange",o=!1,s=!0,a=e.document,h=a.documentElement,u=a[n]?n:"attachEvent",l=a[n]?"removeEventListener":"detachEvent",c=a[n]?"":"on",p=function(n){(n.type!=r||a.readyState==i)&&(("load"==n.type?e:a)[l](c+n.type,p,!1),!o&&(o=!0)&&t.call(e,n.type||n))},d=function(){try{h.doScroll("left")}catch(t){return void setTimeout(d,50)}p("poll")};if(a.readyState==i)t.call(e,"lazy");else{if(a.createEventObject&&h.doScroll){try{s=!e.frameElement}catch(t){}s&&d()}a[u](c+"DOMContentLoaded",p,!1),a[u](c+r,p,!1),e[u](c+"load",p,!1)}},ajax:function(t,e){(r=function(t){for(t=0;4>t;t++)try{return t?new ActiveXObject([,"Msxml2","Msxml3","Microsoft"][t]+".XMLHTTP"):new XMLHttpRequest}catch(t){}}())&&(r.onreadystatechange=function(){4==r.readyState&&e(r.responseText)},r.open("GET",t,!0),r.send(null))}}},{}]},{},[1]),function(t){"use strict";function e(t){var e=getComputedStyle(t);this.units={px:1},this.element=t;var n=function(t){return t&&t.length?parseInt(t):0};this.margins=[e.marginTop,e.marginRight,e.marginBottom,e.marginLeft],this.margins=this.margins.map(n),this.borders=[e.borderTopWidth,e.borderRightWidth,e.borderBottomWidth,e.borderLeftWidth],this.borders=this.borders.map(n),this.paddings=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],this.paddings=this.paddings.map(n),this.borderBox={x:0,y:0,width:t.offsetWidth,height:t.offsetHeight},this.marginBox={x:-this.margins[3],y:-this.margins[0],width:t.offsetWidth+this.margins[1]+this.margins[3],height:t.offsetHeight+this.margins[0]+this.margins[2]};var i=this,r=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"];this.borderBox.radii=r.map(function(t){return t=e[t].split(/\s+/),[i.toPixels(t[0],i.borderBox.width),i.toPixels(t.length>1?t[1]:t[0],i.borderBox.height)]}),this.cssFloat=e.cssFloat}function n(t,e,n){return(n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y)}function i(t,e,i){return Math.abs(n(t,e,i))<350}function r(t,e){return t.x==e.x&&t.y==e.y}function o(t,e,n){return n.x>=Math.min(t.x,e.x)&&n.x<=Math.max(t.x,e.x)&&i(t,e,n)}function s(){}function a(t,e,n,i){if(t.y>=n&&t.y<=i)return{x1:t.x-e,x2:t.x+e};var r,o;return i<t.y?(r=i-t.y,o=T(r,e,e),{x1:t.x-o,x2:t.x+o}):(r=n-t.y,o=T(r,e,e),{x1:t.x-o,x2:t.x+o})}function h(t,e,n){this.init(t,e,n)}function u(t,e){var n=t.polygon.shapeMargin,i=e.x*n,r=e.y*n;this.anchorEdge=t,this.normalUnitVector=e;var o={x:t.vertex1.x+i,y:t.vertex1.y+r},s={x:t.vertex2.x+i,y:t.vertex2.y+r};this.init(t.polygon,o,s)}function l(t){for(var e=0,i=1;i<t.length;++i){var r=t[i];(r.y<t[e].y||r.y==t[e].y&&r.x<t[e].x)&&(e=i)}var o=t[(e+1)%t.length];return n(t[(e+t.length-1)%t.length],t[e],o)<0}function c(t,e,n){if(this.m_vertices=t,this.fillRule=e,this.shapeMargin=n,t.length<3)return this.m_edges=[],void(this.shapeMarginEdges=[]);var r=[],o=t.length>0?t[0].x:void 0,s=t.length>0?t[0].y:void 0,a=o,c=s,p=l(t),d=0;do{var f=this.nextEdgeVertexIndex(d,p);r.push(new h(this,t[d],t[f]));var m=t[d].x,g=t[d].y;o=Math.min(m,o),s=Math.min(g,s),a=Math.max(m,a),c=Math.max(g,c),d=f}while(0!==d);for(var y,x=0;x<r.length&&r.length>3;)y=(x+1)%r.length,i(r[x].vertex1,r[x].vertex2,r[y].vertex2)?(r[x].vertex2=r[y].vertex2,r.splice(y,1)):x++;if(0===n)this.shapeMarginEdges=r;else{for(var v=[],b=0;b<r.length;b++)v.push(new u(r[b],r[b].outwardNormal())),v.push(new u(r[b],r[b].inwardNormal()));this.shapeMarginEdges=v}this.m_edges=r,this.bounds=new S(o-n,s-n,2*n+(a-o),2*n+(c-s))}function p(t,e){return t.minX-e.minX}function d(t,e){return e.x-t.x}function f(t,e){return e.maxX-t.maxX}function m(t,e){return t.x-e.x}function g(t,e,n){this.y=t,this.startX=e,this.endX=n}function y(t,e){this.intervals=[],this.yOffset=t,this.size=e;for(var n=0;e>n;n++)this.intervals[n]=y.none;this.minY=-t,this.maxY=e-t}function x(t){this.shapeMargin=t,this.xIntercepts=[];for(var e=0;t>=e;e++)this.xIntercepts[e]=Math.sqrt(t*t-e*e)}function v(t,e){console.log("Unable to load image ",t,". It's probably missing or you've run into a CORS issue."),e&&console.log("The exact problem was ",e)}function b(t,e,n){var i=document.createElement("canvas");this.width=i.width=e,this.height=i.height=n;var r=i.getContext("2d");r.drawImage(t,0,0,e,n);try{this.imageData=r.getImageData(0,0,e,n)}catch(e){v(t.src,e)}}function w(t,e,n,i,r,o){this.url=t,this.box=e,this.shapeImageThreshold=256*n,this.shapeMargin=i,this.clip=r,this.init(o)}function E(t,e){this.width=t,this.height=e}function S(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i,this.maxX=t+n,this.maxY=e+i}function M(t,e,n,i,r){this.rect=t,this.radii={topLeft:e,topRight:n,bottomLeft:i,bottomRight:r}}function T(t,e,n){return e*Math.sqrt(1-t*t/(n*n))}function R(t,e,n){return 0===e?1:Math.round(0===t||n>t*e/2?e:Math.sqrt(2*n*(e/t)))}function A(t,e){return t.maxX-e}function L(t,e){return t.x+e}function C(t){return t.x}function $(t){return t.maxX}function X(t,e,n,i){return function(r,o,s){if(!this.rect.overlapsYRange(r,o))return[{x:void 0,height:o-r}];var a=[];r<this.rect.y&&a.push({x:void 0,height:this.rect.y-r});var h,u,l,c,p,d,f=t.call(this),m=e.call(this),g=new S(this.rect.x,f.maxY,this.rect.width,m.y-f.maxY);if(f.overlapsYRange(r,o))for(h=R(f.width,f.height,s),u=Math.max(f.y,r),l=Math.min(f.maxY,o),c=u;l>c;c+=h)p=f.maxY-Math.min(c+h,l),d=T(p,f.width,f.height),a.push({height:Math.min(h,l-c),x:i(f,d)});if(u=Math.max(g.y,r),l=Math.min(g.maxY,o),g.overlapsYRange(r,o)&&a.push({x:n(g),height:l-u}),m.overlapsYRange(r,o))for(h=R(m.width,m.height,s),u=Math.max(r,m.y),l=Math.min(m.maxY,o),c=u;l>c;c+=h)p=c-m.y,d=T(p,m.width,m.height),a.push({height:Math.min(h,l-c),x:i(m,d)});return o>this.rect.maxY&&a.push({x:void 0,height:o-this.rect.maxY}),a}}function I(t,e){var n=t.r+e,i=new E(n,n);return new M(new S(t.cx-n,t.cy-n,2*n,2*n),i,i,i,i)}function O(t,e){var n=new E(t.rx+e,t.ry+e);return new M(new S(t.cx-n.width,t.cy-n.height,2*n.width,2*n.height),n,n,n,n)}function q(t,e){function n(t){return new E(t[0]+e,t[1]+e)}var i=n(t.radii[0]),r=n(t.radii[1]),o=n(t.radii[2]),s=n(t.radii[3]);return new M(new S(t.x-e,t.y-e,t.width+2*e,t.height+2*e),i,r,s,o)}function Y(t,e){function n(t){return new E(t[0]+e,t[1]+e)}var i=n(t.radii[0]),r=n(t.radii[1]),o=n(t.radii[2]),s=n(t.radii[3]);return new M(new S(-e,-e,t.width+2*e,t.height+2*e),i,r,s,o)}function j(t,e,n,i,r,o){return new w(t,e,n,i,new S(r.x,r.y,r.width,r.height),o)}function P(t,e){return new c(t.points,t.fillRule,e)}function k(t,e){var n,i=void 0===t.shapeMargin?0:t.shapeMargin;if(t.shape){switch(t.shape.type){case"circle":n=I(t.shape,i);break;case"ellipse":n=O(t.shape,i);break;case"inset":n=q(t.shape,i),n.isRenderable()||n.adjustRadii();break;case"polygon":n=P(t.shape,i)}return e(),n}return t.url?j(t.url,t.box,t.shapeImageThreshold,i,t.clip,e):t.box?(n=Y(t.box,i),e(),n):void console.error("Unrecognized shape")}function F(t){this.metrics=new e(t);var n={metrics:this.metrics,shapeOutside:t.getAttribute("data-shape-outside"),shapeMargin:t.getAttribute("data-shape-margin"),shapeImageThreshold:t.getAttribute("data-shape-image-threshold")};this.shapeValue=new H(n);var i=this;this.geometry=k(this.shapeValue,function(){i.ready=!0,i.callback&&i.callback()})}function N(t){this.scope=t;var e=document.currentScript;e||(e=document.getElementsByTagName("script"),e=e[e.length-1]);var n=this;"false"!==e.getAttribute("data-auto-run")&&t.addEventListener&&t.addEventListener("load",function(){n.run()})}function z(t,e){var n,i=document.createElement("div");e.forEach(function(t){var e=t.bottom-t.top,r=document.createElement("div");r.className="sandbag",n={cssFloat:t.cssFloat,width:t.offset+"px",height:e+"px",clear:t.cssFloat};for(var o in n)r.style[o]=n[o];i.appendChild(r)}),n={position:"relative",width:"auto",height:"0",clear:"both",pointerEvents:"none"};for(var r in n)i.style[r]=n[r];var o,s=t.parentNode,a=getComputedStyle(s),h=parseFloat(a.borderTop)+parseFloat(a.borderBottom);n={position:"absolute",top:"0",width:"100%",height:s.clientHeight-h,left:"0"},o=document.createElement("div");for(r in n)o.style[r]=n[r];i.appendChild(o),t.parentNode&&t.parentNode.insertBefore(i,t),o.appendChild(t),i.setAttribute("data-shape-outside-container","true")}function B(t,e){var n;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){n=null,t.apply(i,r)},e)}}function H(t){return t&&t.metrics&&t.shapeOutside?(this.url=this.parseUrl(t.shapeOutside),this.box=this.parseBox(this.url?"content-box":t.shapeOutside,t.metrics),this.shape=this.parseBasicShape(t.shapeOutside,this.box,t.metrics),this.clip=this.computeClip(this.box,t.metrics),this.shapeMargin=this.parseShapeMargin(t.shapeMargin,this.box,t.metrics),void(this.shapeImageThreshold=this.parseShapeImageThreshold(t.shapeImageThreshold))):void console.error("ShapeValue requires at least a metrics object and shape-outside string")}function D(t,e,n){var i=n.reduce(function(t,e){return t+e[0]},0),r=n.reduce(function(t,e){return t+e[1]},0),o=n.reduce(function(t,e){return t+e[2]},0),s=n.reduce(function(t,e){return t+e[3]},0);t.x-=e*s,t.y-=e*i,t.width+=e*(s+r),t.height+=e*(i+o)}function V(t,e,n){if(0>e)return Math.max(t+e*n,0);var i=Math.abs(t/n);return 1>i?Math.max(t+n*(1+Math.pow(i-1,3)),0):t+n}function _(t,e,n){var i=n.reduce(function(t,e){return t+e[0]},0),r=n.reduce(function(t,e){return t+e[1]},0),o=n.reduce(function(t,e){return t+e[2]},0),s=n.reduce(function(t,e){return t+e[3]},0);t[0][0]=V(t[0][0],e,s),t[0][1]=V(t[0][1],e,i),t[1][0]=V(t[1][0],e,r),t[1][1]=V(t[1][1],e,i),t[2][0]=V(t[2][0],e,r),t[2][1]=V(t[2][1],e,o),t[3][0]=V(t[3][0],e,s),t[3][1]=V(t[3][1],e,o)}function W(t,e){return t.map(function(t){return t[e]})}function U(t,e,n){t=t.split(/\s+/);var i="TopLeft",r=0;switch(t[0]){case"top":case"left":break;case"bottom":case"right":i="BottomRight";break;case"center":r=e/2;break;default:r=n.toPixels(t[0],e)}return t.length>1&&(r=n.toPixels(t[1],e)),"TopLeft"===i?r:e-r}function G(t,e,n,i){return"closest-side"===t?Math.min.apply(null,e):"farthest-side"===t?Math.max.apply(null,e):i.toPixels(t,n)}function J(){var t,e,n=document,i=[];if("function"==typeof n.querySelectorAll)i=n.querySelectorAll('link[rel="stylesheet"], style'),i=Array.prototype.slice.call(i,0);else{var r=n.getElementsByTagName("link");if(r.length)for(t=0,e=r.length;e>t;t++)"stylesheet"===r[t].getAttribute("rel")&&i.push(r[t]);for(r=n.getElementsByTagName("style"),t=0,e=r.length;e>t;t++)i.push(r[t])}return i}function Z(t){this.source=t,this.url=t.href||null,this.cssText=""}function K(t){return this instanceof K?(this.stylesheets=[],this.queueCount=0,this.callback=t||function(){},void this.init()):new K(t)}function Q(t){this.callback=t||function(){};var e=this;new K(function(t){e.onStylesLoaded(t)})}e.prototype.unitToPx=function(t){if(this.units[t])return this.units[t];var e=this.element.style.getPropertyValue("line-height");return this.element.style.setProperty("line-height",1+t),this.units[t]=parseFloat(getComputedStyle(this.element).getPropertyValue("line-height")),this.element.style.setProperty("line-height",e),this.units[t]},e.prototype.getUnitsMap=function(t){var e=["em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","in","px","pt","pc"],n=document.createElement("div");n.style.width="0px",n.style.height="0px",t.appendChild(n);var i=getComputedStyle(n),r={};return e.forEach(function(t){n.style.lineHeight="1"+t,r[t]=parseFloat(i.lineHeight)}),n.parentNode.removeChild(n),r},e.prototype.toPixels=function(t,e){var n=/([\-0-9\.]*)([a-z%]*)/.exec(t);return n[1]=parseFloat(n[1]),n[2]?"%"===n[2]?n[1]*e/100:n[1]*this.unitToPx(n[2]):n[1]},s.prototype.init=function(t,e,n){this.polygon=t,this.vertex1=e,this.vertex2=n,this.minX=Math.min(this.vertex1.x,this.vertex2.x),this.maxX=Math.max(this.vertex1.x,this.vertex2.x)},s.prototype.containsPoint=function(t){return o(this.vertex1,this.vertex2,t)},s.prototype.overlapsYRange=function(t,e){var n=this.vertex1.y,i=this.vertex2.y;return e>=Math.min(n,i)&&t<=Math.max(n,i)},s.prototype.isWithinYRange=function(t,e){var n=this.vertex1.y,i=this.vertex2.y;return t<=Math.min(n,i)&&e>=Math.max(n,i)},s.prototype.inwardNormal=function(){var t=this.vertex2.x-this.vertex1.x,e=this.vertex2.y-this.vertex1.y,n=Math.sqrt(t*t+e*e);return{x:-e/n,y:t/n}},s.prototype.outwardNormal=function(){var t=this.inwardNormal();return{x:-t.x,y:-t.y}},s.prototype.xIntercept=function(t){var e=this.vertex1.y,n=this.vertex2.y;return e==n?Math.min(this.vertex1.x,this.vertex2.x):t==Math.min(e,n)?n>e?this.vertex1.x:this.vertex2.x:t==Math.max(e,n)?e>n?this.vertex1.x:this.vertex2.x:this.vertex1.x+(t-e)*(this.vertex2.x-this.vertex1.x)/(n-e)},s.prototype.clippedEdgeXRange=function(t,e){if(this.isWithinYRange(t,e)){var n=this.vertex1.x,i=this.vertex2.x;return{x1:Math.min(n,i),x2:Math.max(n,i)}}var r,o;this.vertex1.y<this.vertex2.y?(r=this.vertex1,o=this.vertex2):(r=this.vertex2,o=this.vertex1);var s=r.y<t?this.xIntercept(t):r.x,a=o.y>e?this.xIntercept(e):o.x;return{x1:Math.min(s,a),x2:Math.max(s,a)}},h.prototype=new s,u.prototype=new s,c.prototype.vertexAt=function(t){return this.m_vertices[t]},c.prototype.edgeAt=function(t){return this.m_edges[t]},c.prototype.isEmpty=function(){return this.m_edges.length<3||this.bounds.isEmpty()},c.prototype.vertices=function(){return this.m_vertices.slice(0)},c.prototype.edges=function(){return this.m_edges.slice(0)},c.prototype.overlapsYRange=function(t,e){return t<this.bounds.maxY&&e>=this.bounds.y},c.prototype.nextVertexIndex=function(t,e){var n=this.m_vertices.length;return(e?t+1:t-1+n)%n},c.prototype.nextEdgeVertexIndex=function(t,e){for(var n=(this.m_vertices.length,this.nextVertexIndex(t,e));n&&r(this.vertexAt(t),this.vertexAt(n));)n=this.nextVertexIndex(n,e);for(;n;){var o=this.nextVertexIndex(n,e);if(!i(this.vertexAt(t),this.vertexAt(n),this.vertexAt(o)))break;n=o}return n},c.prototype.containsPointEvenOdd=function(t){for(var e=0,n=0;n<this.m_edges.length;++n){var i=this.edgeAt(n);if(i.containsPoint(t))return!0;var r=i.vertex1,o=i.vertex2;if(r.y<=t.y&&o.y>t.y||r.y>t.y&&o.y<=t.y){var s=(t.y-r.y)/(o.y-r.y);t.x<r.x+s*(o.x-r.x)&&++e}}return 0!=(1&e)},c.prototype.containsPointNonZero=function(t){for(var e=0,i=0;i<this.m_edges.length;++i){var r=this.edgeAt(i);if(r.containsPoint(t))return!0;var o=r.vertex1,s=r.vertex2;s.y<t.y?o.y>t.y&&n(o,s,t)>0&&++e:s.y>t.y&&o.y<=t.y&&n(o,s,t)<0&&--e}return 0!==e},c.prototype.containsPoint=function(t){return!!this.bounds.containsPoint(t)&&("nonzero"==this.fillRule?this.containsPointNonZero(t):this.containsPointEvenOdd(t))},c.prototype.edgeVerticesThatOverlapYRange=function(t,e){for(var n=[],i=0;i<this.m_edges.length;i++){var r=this.edgeAt(i).vertex1;r.y>=t&&r.y<e&&n.push(r)}return n},c.prototype.edgesThatOverlapYRange=function(t,e){for(var n=[],i=0;i<this.m_edges.length;i++){var r=this.edgeAt(i);r.overlapsYRange(t,e)&&n.push(r)}return n},c.prototype.shapeMarginEdgesThatOverlapYRange=function(t,e){for(var n=[],i=0;i<this.shapeMarginEdges.length;i++){var r=this.shapeMarginEdges[i];r.overlapsYRange(t,e)&&n.push(r)}return n},c.prototype.leftExclusionEdge=function(t,e){if(!this.isEmpty()&&this.bounds.overlapsYRange(t,e)){var n,i,r,o=this.shapeMarginEdgesThatOverlapYRange(t,e);if(0!==o.length)for(o.sort(p),n=o[0].clippedEdgeXRange(t,e).x1,i=1;i<o.length&&!(o[i].minX>n);i++)r=o[i].clippedEdgeXRange(t,e),n=void 0===n?r.x1:Math.min(n,r.x1);var s=this.shapeMargin;if(s>0){var h=this.edgeVerticesThatOverlapYRange(t-s,e+s);for(h.sort(d),i=0;i<h.length;i++)r=a(h[i],s,t,e),n=void 0===n?r.x1:Math.min(n,r.x1)}return void 0===n&&console.error("Polygon leftExclusionEdge() failed"),n}},c.prototype.rightExclusionEdge=function(t,e){if(!this.isEmpty()&&this.bounds.overlapsYRange(t,e)){var n,i,r,o=this.shapeMarginEdgesThatOverlapYRange(t,e);if(0!==o.length)for(o.sort(f),n=o[0].clippedEdgeXRange(t,e).x2,i=1;i<o.length&&!(o[i].maxX<n);i++)r=o[i].clippedEdgeXRange(t,e),n=Math.max(n,r.x2);var s=this.shapeMargin;if(s>0){var h=this.edgeVerticesThatOverlapYRange(t-s,e+s);for(h.sort(m),i=0;i<h.length;i++)r=a(h[i],s,t,e),n=void 0===n?r.x2:Math.max(n,r.x2)}return void 0===n&&console.error("Polygon rightExclusionEdge() failed"),n}},y.none={},y.prototype.intervalAt=function(t){return this.intervals[t+this.yOffset]},y.prototype.setIntervalAt=function(t,e){this.intervals[t+this.yOffset]=e},y.prototype.uniteIntervalAt=function(t,e){var n=this.intervalAt(t);n===y.none?this.setIntervalAt(t,e):(n.startX=Math.min(n.startX,e.startX),n.endX=Math.max(n.endX,e.endX))},y.prototype.intervalAtContains=function(t,e){var n=this.intervalAt(t);return n!=y.none&&(n.startX<=e.startX&&n.endX>=e.endX)},x.prototype.generateIntervalAt=function(t,e){var n=Math.abs(t-e.y),i=n>this.shapeMargin?0:this.xIntercepts[n];return new g(t,e.startX-i,e.endX+i)},y.prototype.computeMarginIntervals=function(t){for(var e=new x(t),n=new y(this.yOffset,this.size),i=this.minY;i<this.maxY;++i){var r=this.intervalAt(i);if(r!=y.none){var o,s=Math.max(this.minY,i-t),a=Math.min(this.maxY-1,i+t);for(o=i-1;o>=s&&!(o>0&&this.intervalAtContains(o,r));--o)n.uniteIntervalAt(o,e.generateIntervalAt(o,r));for(n.uniteIntervalAt(i,e.generateIntervalAt(i,r)),o=i+1;a>=o&&!(o<this.maxY&&this.intervalAtContains(o,r));++o)n.uniteIntervalAt(o,e.generateIntervalAt(o,r))}}return n},b.prototype.hasData=function(){return!!this.imageData},b.prototype.alphaAt=function(t,e){return this.imageData.data[4*t+3+e*this.width*4]},w.prototype.init=function(t){var e,n=this,i=new Image;if(document.createElement("canvas").getContext||(v(n.url),t()),i.onload=function(){n.intervals=n.computeIntervals(i),n.intervals&&n.shapeMargin>0&&(n.intervals=n.intervals.computeMarginIntervals(n.shapeMargin,n.clip)),e&&URL.revokeObjectURL(e),t()},i.onerror=function(){v(n.url),t()},!i.hasOwnProperty("crossOrigin")&&window.URL&&window.URL.createObjectURL){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(e=URL.createObjectURL(r.response),i.src=e):(v(n.url),t()))},r.open("GET",n.url,!0),r.responseType="blob",r.send()}else i.crossOrigin="anonymous",i.src=n.url},w.prototype.computeIntervals=function(t){var e=this.clip,n=this.shapeImageThreshold,i=this.box.width,r=this.box.height,o=new b(t,i,r);if(o.hasData()){for(var s=new y(-e.y,e.height),a=Math.min(e.height,this.box.height),h=0;a>h;h++)for(var u=-1,l=0;l<this.box.width;l++){var c=o.alphaAt(l,h);-1==u&&c>n?(u=l,s.intervalAt(h)===y.none&&s.setIntervalAt(h,new g(h,u,i))):-1!=u&&n>=c&&(s.intervalAt(h).endX=l,u=-1)}return s}},w.prototype.rightExclusionEdge=function(t,e){var n=this.intervals;if(!n)return this.clip.width;for(var i,r=Math.max(t,this.clip.y);e>=r&&r<this.clip.maxY;r++){var o=n.intervalAt(r).endX;(void 0===i||void 0!==o&&o>i)&&(i=o)}return i},w.prototype.leftExclusionEdge=function(t,e){var n=this.intervals;if(!n)return 0;for(var i,r=Math.max(t,this.clip.y);e>=r&&r<this.clip.maxY;r++){var o=n.intervalAt(r).startX;(void 0===i||void 0!==o&&i>o)&&(i=o)}return i},E.zeroSize={width:0,height:0},E.prototype.isEmpty=function(){return this.width<=0||this.height<=0},E.prototype.scale=function(t){this.width*=t,this.height*=t},S.prototype.isEmpty=function(){return this.width<=0||this.height<=0},S.prototype.containsX=function(t){return t>=this.x&&t<this.maxX},S.prototype.containsY=function(t){return t>=this.y&&t<this.maxY},S.prototype.containsPoint=function(t){return this.containsX(t.x)&&this.containsY(t.y)},S.prototype.shiftLeftEdgeTo=function(t){this.width-=t-this.x,this.x=t},S.prototype.shiftTopEdgeTo=function(t){this.height-=t-this.y,this.y=t},S.prototype.shiftRightEdgeTo=function(t){this.width=t-this.x},S.prototype.shiftBottomEdgeTo=function(t){this.height=t-this.y},S.prototype.overlapsYRange=function(t,e){return!this.isEmpty()&&e>=this.y&&t<this.maxY},S.prototype.overlapsXRange=function(t,e){return!this.isEmpty()&&e>=this.x&&t<this.maxX},M.prototype.isEmpty=function(){return this.width<=0||this.height<=0},M.prototype.topLeftCorner=function(){return new S(this.rect.x,this.rect.y,this.radii.topLeft.width,this.radii.topLeft.height)},M.prototype.topRightCorner=function(){return new S(this.rect.maxX-this.radii.topRight.width,this.rect.y,this.radii.topRight.width,this.radii.topRight.height)},M.prototype.bottomLeftCorner=function(){return new S(this.rect.x,this.rect.maxY-this.radii.bottomLeft.height,this.radii.bottomLeft.width,this.radii.bottomLeft.height)},M.prototype.bottomRightCorner=function(){return new S(this.rect.maxX-this.radii.bottomRight.width,this.rect.maxY-this.radii.bottomRight.height,this.radii.bottomRight.width,this.radii.bottomRight.height)},M.prototype.isRounded=function(){function t(t){return t.width>0&&t.height>0}return t(this.radii.topLeft)||t(this.radii.topRight)||t(this.radii.bottomLeft)||t(this.radii.bottomRight)},M.prototype.cornersInsetRect=function(){var t=this.topLeftCorner(),e=this.topRightCorner(),n=this.bottomLeftCorner(),i=this.bottomRightCorner(),r=Math.max(t.maxX,n.maxX),o=Math.max(t.maxY,e.maxY);return new S(r,o,Math.min(e.x,i.x)-r,Math.min(n.y,i.y)-o)},M.prototype.scaleRadii=function(t){if(1!=t){var e=this.radii;e.topLeft.scale(t),e.topLeft.isEmpty()&&(e.topLeft=E.zeroSize),e.topRight.scale(t),e.topRight.isEmpty()&&(e.topRight=E.zeroSize),e.bottomLeft.scale(t),e.bottomLeft.isEmpty()&&(e.bottomLeft=E.zeroSize),e.bottomRight.scale(t),e.bottomRight.isEmpty()&&(e.bottomRight=E.zeroSize)}},M.prototype.isRenderable=function(){var t=this.radii,e=this.rect;return t.topLeft.width+t.topRight.width<=e.width&&t.bottomLeft.width+t.bottomRight.width<=e.width&&t.topLeft.height+t.bottomLeft.height<=e.height&&t.topRight.height+t.bottomRight.height<=e.height},M.prototype.adjustRadii=function(){var t=this.radii,e=Math.max(t.topLeft.width+t.topRight.width,t.bottomLeft.width+t.bottomRight.width),n=Math.max(t.topLeft.height+t.bottomLeft.height,t.topRight.height+t.bottomRight.height);if(0>=e||0>=n)return void(this.radii={topLeft:E.zeroSize,topRight:E.zeroSize,bottomRight:E.zeroSize,bottomLeft:E.zeroSize});var i=this.rect,r=i.width/e,o=i.height/n;this.scaleRadii(o>r?r:o)},M.prototype.minXInterceptAt=function(t,e){if(!this.rect.containsY(t))return e;var n,i=this.topLeftCorner();if(i.containsY(t))return n=i.maxY-t,i.maxX-T(n,i.width,i.height);var r=this.bottomLeftCorner();return r.containsY(t)?(n=t-r.y,r.maxX-T(n,r.width,r.height)):this.rect.x},M.prototype.maxXInterceptAt=function(t,e){if(!this.rect.containsY(t))return e;var n,i=this.topRightCorner();if(i.containsY(t))return n=i.maxY-t,i.x+T(n,i.width,i.height);var r=this.bottomRightCorner();return r.containsY(t)?(n=t-r.y,r.x+T(n,r.width,r.height)):this.rect.maxX},M.prototype.rightExclusionEdge=function(t,e){return this.rect.isEmpty()||!this.rect.overlapsYRange(t,e)?void 0:!this.isRounded()||this.cornersInsetRect().overlapsYRange(t,e)?this.rect.maxX:Math.max(this.maxXInterceptAt(t,this.rect.x),this.maxXInterceptAt(e,this.rect.x))},M.prototype.leftExclusionEdge=function(t,e){return this.rect.isEmpty()||!this.rect.overlapsYRange(t,e)?void 0:!this.isRounded()||this.cornersInsetRect().overlapsYRange(t,e)?this.rect.x:Math.min(this.minXInterceptAt(t,this.rect.maxX),this.minXInterceptAt(e,this.rect.maxX))},M.prototype.rightExclusionOffsets=X(M.prototype.topRightCorner,M.prototype.bottomRightCorner,$,L),M.prototype.leftExclusionOffsets=X(M.prototype.topLeftCorner,M.prototype.bottomLeftCorner,C,A),F.prototype.onReady=function(t){this.ready?t():this.callback=t},F.prototype.leftExclusionEdge=function(t){return this.geometry?this.geometry.leftExclusionEdge(t.top,t.bottom):t.left},F.prototype.rightExclusionEdge=function(t){return this.geometry?this.geometry.rightExclusionEdge(t.top,t.bottom):t.right},F.prototype.computeStepOffsets=function(t){for(var e,n=[],i=0;i<Math.ceil(this.metrics.marginBox.height/t);i++){var r={left:0,right:this.shapeValue.box.width,top:i*t,bottom:Math.min((i+1)*t,this.metrics.marginBox.height)};r.top-=this.metrics.margins[0]+this.shapeValue.box.y,r.bottom-=this.metrics.margins[0]+this.shapeValue.box.y,"left"===this.metrics.cssFloat?(e=this.rightExclusionEdge(r),e=void 0===e?0:e+this.shapeValue.box.x+this.metrics.margins[3]):(e=this.leftExclusionEdge(r),e=void 0===e?0:this.metrics.marginBox.width-(e+this.shapeValue.box.x+this.metrics.margins[3])),n.push({cssFloat:this.metrics.cssFloat,top:r.top+this.shapeValue.box.y+this.metrics.margins[0],bottom:r.bottom+this.shapeValue.box.y+this.metrics.margins[0],offset:Math.min(e,this.metrics.marginBox.width)})}return n},F.prototype.computeAdaptiveOffsets=function(t){for(var e=this.shapeValue.box.x+this.metrics.margins[3],n=this.metrics.margins[0]+this.shapeValue.box.y,i="left"===this.metrics.cssFloat?this.geometry.rightExclusionOffsets(-n,this.metrics.marginBox.height-n,t):this.geometry.leftExclusionOffsets(-n,this.metrics.marginBox.height-n,t),r=[],o=0,s=0;s<i.length;s++){var a;void 0===i[s].x?a=0:(a="left"==this.metrics.cssFloat?i[s].x+e:this.metrics.marginBox.width-(i[s].x+e),a=Math.min(a,this.metrics.marginBox.width)),r.push({offset:a,top:o,bottom:o+i[s].height,cssFloat:this.metrics.cssFloat}),o+=i[s].height}return r},F.prototype.offsets=function(t){return this.geometry instanceof M?"step"==(t&&t.mode)?this.computeStepOffsets(t.step):this.computeAdaptiveOffsets(t.limit):this.computeStepOffsets(t.step)},N.prototype.polyfill=function(t,e){var n=getComputedStyle(t);if(/left|right/.test(n.cssFloat)&&t.getAttribute("data-shape-outside")){var i=e&&e.step||parseInt(n.fontSize),r=e&&e.mode||"adaptive",o=e&&e.limit||1.8*i,s=new F(t),a=this;s.onReady(function(){z(t,s.offsets({mode:r,limit:o,step:i})),e&&e.callback&&"function"==typeof e.callback&&e.callback.call(a.scope)})}},N.prototype.removePolyfill=function(t){var e=t.parentNode;for(e=t.parentNode;e&&e.hasAttribute&&!e.hasAttribute("data-shape-outside-container");e=e.parentNode);e&&e.hasAttribute&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))},N.prototype.run=function(t){var e=this,n=t&&t.force,i=(n&&(n===this.Force.Layout||this.Force.LayoutStyles),n&&(n===this.Force.Styles||n===this.Force.LayoutStyles));if(n===this.Force.LayoutStyles?t.force=this.Force.Layout:n&&delete t.force,void 0===this.hasNativeSupport){var r=document.createElement("div");["shape-outside","-webkit-shape-outside"].forEach(function(t){r.style.setProperty(t,"content-box"),e.hasNativeSupport=e.hasNativeSupport||r.style.getPropertyValue(t)})}if(!this.hasNativeSupport||n){if(!this.stylesLoaded||i){this.stylesLoaded=!0,new Q(function(n){n.forEach(function(t){for(var e=document.querySelectorAll(t.selector),n=0;n<e.length;n++)e[n].setAttribute("data-"+t.property,t.value)}),e.run(t)});var o=B(function(){e.teardown(),e.run(t)},300);return void this.scope.addEventListener("resize",o)}for(var s=document.querySelectorAll("[data-shape-outside]"),a=0;a<s.length;a++)this.polyfill(s[a],t)}},N.prototype.teardown=function(){for(var t=document.querySelectorAll("[data-shape-outside]"),e=0;e<t.length;e++)this.removePolyfill(t[e])},N.prototype.Force={Layout:"force-layout",Styles:"force-styles",LayoutStyles:"force-layout-styles"},Object.freeze&&(N.prototype.Force=Object.freeze(N.prototype.Force)),H.prototype.parseUrl=function(t){var e=/url\((.*)\)/.exec(t);return e?(e=e[1],e=e.replace(/^['"]/,""),e=e.replace(/['"]$/,"")):null},H.prototype.parseBox=function(t,e){var n=/margin-box|border-box|padding-box|content-box/.exec(t);n=n?n[0]:"margin-box";var i=JSON.parse(JSON.stringify(e.borderBox.radii)),r={text:n,x:e.borderBox.x,y:e.borderBox.y,width:e.borderBox.width,height:e.borderBox.height,radii:i};switch(n){case"content-box":D(r,-1,[e.paddings,e.borders]),_(r.radii,-1,[e.paddings,e.borders]);break;case"padding-box":D(r,-1,[e.borders]),_(r.radii,-1,[e.borders]);break;case"border-box":break;case"margin-box":D(r,1,[e.margins]),_(r.radii,1,[e.margins])}return r},H.prototype.printShape=function(){if(this.shape)switch(this.shape.type){case"inset":return"inset("+this.shape.insets.join(" ")+" round "+W(this.shape.radii,0).join(" ")+" / "+W(this.shape.radii,1).join(" ")+")";case"circle":return"circle("+this.shape.r+" at "+this.shape.cx+" "+this.shape.cy+")";case"ellipse":return"ellipse("+this.shape.rx+" "+this.shape.ry+" at "+this.shape.cx+" "+this.shape.cy+")";case"polygon":return"polygon("+this.shape.fillRule+", "+this.shape.points.map(function(t){return t.x+" "+t.y}).join(", ")+")";default:return"not yet implemented for "+this.shape.type}return"no shape specified"},H.prototype.printBox=function(){return this.box?this.box.text+" { x: "+this.box.x+", y: "+this.box.y+", width: "+this.box.width+", height: "+this.box.height+", radii: "+W(this.box.radii,0).join(" ")+" / "+W(this.box.radii,1).join(" ")+" }":"no box specified"},H.prototype.parseBasicShape=function(t,e,n){var i=/(inset|circle|ellipse|polygon)\((.*)\)/.exec(t);if(!i)return null;var r=i[1],o=i[2]?i[2]:"";switch(r){case"inset":return this.parseInset(o,e,n);case"circle":return this.parseCircle(o,e,n);case"ellipse":return this.parseEllipse(o,e,n);case"polygon":return this.parsePolygon(o,e,n);default:return null}},H.prototype.parseInset=function(t,e,n){t=/((?:[^r]|r(?!o))*)?\s*(?:round\s+([^\/]*)(?:\s*\/\s*(.*))?)?/.exec(t);var i={type:"inset",insets:[0,0,0,0],radii:[[0,0],[0,0],[0,0],[0,0]]};if(t&&t[1]){var r=t[1].trim();r=r.split(/\s+/),i.insets[0]=r[0],i.insets[1]=r.length>1?r[1]:i.insets[0],i.insets[2]=r.length>2?r[2]:i.insets[0],i.insets[3]=r.length>3?r[3]:i.insets[1],i.insets[0]=n.toPixels(i.insets[0],e.height),i.insets[1]=n.toPixels(i.insets[1],e.width),i.insets[2]=n.toPixels(i.insets[2],e.height),i.insets[3]=n.toPixels(i.insets[3],e.width)}var o;return t&&t[2]&&(o=t[2].trim(),o=o.split(/\s+/),o.length<2&&o.push(o[0]),o.length<3&&o.push(o[0]),o.length<4&&o.push(o[1]),i.radii=o.map(function(t){return t=n.toPixels(t,e.width),[t,t]})),t&&t[3]&&(o=t[3].trim(),o=o.split(/\s+/),o.length<2&&o.push(o[0]),o.length<3&&o.push(o[0]),o.length<4&&o.push(o[1]),o.forEach(function(t,r){i.radii[r][1]=n.toPixels(t,e.height)})),i.x=i.insets[3],i.y=i.insets[0],i.width=e.width-(i.insets[1]+i.insets[3]),i.height=e.height-(i.insets[0]+i.insets[2]),i},H.prototype.parseEllipsoid=function(t){t=/((?:[^a]|a(?!t))*)?\s*(?:at\s+(.*))?/.exec(t);var e={};if(t&&t[1]){var n=t[1].trim();n=n.split(/\s+/),e.rx=n[0],e.ry=n.length>1?n[1]:n[0]}else e.rx=e.ry="closest-side";var i=[];if(t&&t[2]){var r=t[2].trim();r=r.split(/\s+/);var o=!1;r.forEach(function(t){
/\d+/.test(t)&&o?i[i.length-1]+=" "+t:i.push(t),o=/top|bottom|left|right/.test(t)&&r.length>2})}for(;i.length<2;)i.push("center");if(/top|bottom/.test(i[0])||/left|right/.test(i[1])){var s=i[0];i[0]=i[1],i[1]=s}return e.cx=i[0],e.cy=i[1],e},H.prototype.parseCircle=function(t,e,n){var i=this.parseEllipsoid(t);return i.type="circle",i.cx=U(i.cx,e.width,n),i.cy=U(i.cy,e.height,n),i.r=G(i.rx,[Math.abs(i.cx),Math.abs(e.width-i.cx),Math.abs(i.cy),Math.abs(e.height-i.cy)],Math.sqrt((e.width*e.width+e.height*e.height)/2),n),delete i.rx,delete i.ry,i},H.prototype.parseEllipse=function(t,e,n){var i=this.parseEllipsoid(t);return i.type="ellipse",i.cx=U(i.cx,e.width,n),i.cy=U(i.cy,e.height,n),i.rx=G(i.rx,[Math.abs(i.cx),Math.abs(e.width-i.cx)],e.width,n),i.ry=G(i.ry,[Math.abs(i.cy),Math.abs(e.height-i.cy)],e.height,n),i},H.prototype.parsePolygon=function(t,e,n){t=t.split(/\s*,\s*/);var i="nonzero";return t.length>0&&/nonzero|evenodd/.test(t[0])&&(i=t[0].trim(),t=t.slice(1)),{type:"polygon",fillRule:i,points:t.map(function(t){var i=t.split(/\s+/);return{x:n.toPixels(i[0],e.width),y:n.toPixels(i[1],e.height)}})}},H.prototype.computeClip=function(t,e){var n=e.margins[3],i=e.margins[0],r=e.margins[3]+e.margins[1],o=e.margins[0]+e.margins[2];return{x:-t.x-n,y:-t.y-i,width:e.borderBox.width+r,height:e.borderBox.height+o}},H.prototype.parseShapeMargin=function(t,e,n){return parseInt(t)?Math.max(0,n.toPixels(t,e.width)):0},H.prototype.parseShapeImageThreshold=function(t){var e=parseFloat(t);return e?Math.min(Math.max(0,e),1):0},Z.prototype.load=function(t,e,n){var i=this;if(this.url){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(i.cssText=r.responseText,t.call(n,i)):e.call(n,i))},r.open("GET",this.url);try{r.send(null)}catch(t){console.log("An error occurred loading a stylesheet, probably because we can't access the local file system"),e.call(n,i)}}else this.cssText=this.source.textContent,t.call(n,i)},K.prototype.init=function(){var t,e,n=J(),i=n.length;for(this.queueCount=i,e=0;i>e;e++)t=new Z(n[e]),this.stylesheets.push(t),t.load(this.onStyleSheetLoad,this.onStyleSheetError,this)},K.prototype.onStyleSheetLoad=function(){this.queueCount--,this.onComplete.call(this)},K.prototype.onStyleSheetError=function(t){var e,n=this.stylesheets.length;for(e=0;n>e;e++)if(t.source===this.stylesheets[e].source)return this.stylesheets.splice(e,1),this.queueCount--,void this.onComplete.call(this)},K.prototype.onComplete=function(){0===this.queueCount&&this.callback.call(this,this.stylesheets)},Q.prototype.onStylesLoaded=function(t){var e,n,i=[];["shape-outside","shape-margin","shape-image-threshold"].forEach(function(r){e=new RegExp("\\s*([^{}]*[^\\s])\\s*{[^\\}]*("+r+")\\s*:\\s*((?:[^;\\(]|\\([^\\)]*\\))*)\\s*;","ig"),t.forEach(function(t){for(;null!==(n=e.exec(t.cssText));)i.push({selector:n[1],property:n[2],value:n[3]})})}),this.callback(i)},t.ShapesPolyfill=new N(t)}(window);